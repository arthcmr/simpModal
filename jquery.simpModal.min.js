(function($){$.extend({simpModal:function(o){var d={modal_wrapper:'simp_modal_wrapper',modal_overlay:'simp_overlay',modal:'simp_modal',loading:'loading',close_button:'close_button',dp:'data-close',dv:'true',};var def={top:100,overlay:0.4,extraClass:null,element:null,link:null,file:null,params:null,method:'post',content:null,width:null,closeButton:false,loadingMessage:"Loading...",speed:200,transition:'fade',clickEnter:true,closeEsc:true};o=$.extend(def,o);var modal_all=$("<div id='"+d.modal_wrapper+"' class='"+d.modal_wrapper+"'><div id='"+d.modal_overlay+"' class='"+d.modal_overlay+"'></div><div id='"+d.modal+"' class='"+d.modal+"'></div></div>");$("body").append(modal_all);ol=$("#"+d.modal_overlay);m=$("#"+d.modal);mw=$("#"+d.modal_wrapper);mw.css({"position":"fixed","z-index":9998,"top":"0px","left":"0px","bottom":"0px","right":"0px","height":"100%","width":"100%","overflow-y":"auto"});ol.css({"position":"fixed","z-index":9999,"top":"0px","left":"0px","bottom":"0px","right":"0px","height":"100%","width":"100%"});if(o.width!==null){m.css('width',o.width);} if(o.content!==null){m.html(o.content);} if(o.link!==null){var linkObj=o.link;var link=linkObj.attr("href");o.element=$(link);o.link=null;linkObj.click(function(){$.simpModal(o);});return;} if(o.element!==null){var element=o.element.html();m.html(element);} if(o.extraClass!==null){m.addClass(o.extraClass);} if(o.file===null){c_b();o_m();return;}else{loading="<div class='"+d.loading+"'>"+o.loadingMessage+"</div>";m.html(loading);o_m();var params={};if(o.params!==null){params=o.params;} if(o.method==='get'){$.get(o.file,params,function(data){m.html(data);c_b();});}else{$.post(o.file,params,function(data){m.html(data);c_b();});} return;} function o_m(){ol.click(function(){c_m();});var dcb=m.find("*["+d.dp+"='"+d.dv+"']");dcb.click(function(){c_m();});$('html').bind('keyup',k_e);var modal_height=m.outerHeight();var modal_width=m.outerWidth();ol.css({"display":"block",opacity:0});ol.fadeTo(o.speed,o.overlay);var possibleTransitions=['fade','slide','slideUp','slideRight'];if($.inArray(o.transition,possibleTransitions)===-1){o.transition='fade';} switch(o.transition){case"slide":m.css({"display":"block","position":"absolute","opacity":1,"z-index":10000,"left":"50%","margin-left":-(modal_width/2)+"px","top":"-"+(modal_height+50)+"px"});m.animate({top:o.top+"px"},o.speed);break;case"slideUp":mw.css({"overflow-y":"hidden"});m.css({"display":"block","position":"absolute","opacity":1,"z-index":10000,"left":"50%","margin-left":-(modal_width/2)+"px","top":"105%"});m.animate({top:o.top+"px"},o.speed,function(){mw.css({"overflow-y":"auto"});});break;case"slideRight":mw.css({"overflow-y":"hidden"});m.css({"display":"block","position":"absolute","opacity":1,"z-index":10000,"left":-(modal_width)+"px","margin-left":-(modal_width/2)+"px","top":o.top+"px"});m.animate({left:"50%"},o.speed,function(){mw.css({"overflow-y":"auto"});});break;case"fade":m.css({"display":"block","position":"absolute","opacity":0,"z-index":10000,"left":"50%","margin-left":-(modal_width/2)+"px","top":o.top+"px"});m.fadeTo(o.speed,1);break;}} function c_m(){ol.fadeOut(200);switch(o.transition){case"slide":m.animate({top:"-"+(m.outerHeight()+50)+"px"},200,r_m);break;case"slideUp":mw.css({"overflow-y":"hidden"});m.animate({top:"105%"},200,r_m);break;case"slideRight":m.animate({left:"150%"},200,r_m);break;case"fade":m.fadeOut(200,r_m);break;} $('html').unbind('keyup');} function r_m(){ol.remove();m.remove();mw.remove();} function k_e(e){var c=(e.keyCode?e.keyCode:e.which);if(o.closeEsc===true&&c==27){c_m();} if(o.clickEnter!==false&&c==13){var e=false;switch(o.clickEnter){case true:e=m.find("button[type='submit']:last");break;case'first':e=m.find("button:first");break;case'last':e=m.find("button:last");break;default:e=m.find(o.enterButton);break;} e.click();o.clickEnter=null;}} function c_b(){if(o.closeButton===true){m.prepend("<button type='button' class='"+d.close_button+"'>Ã—</button>");m.find("."+d.close_button).unbind('click');m.find("."+d.close_button).bind('click',c_m);}}}});})(jQuery);