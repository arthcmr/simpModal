(function(c){c.extend({simpModal:function(a){function j(){g(a.beforeOpen);overlay.click(function(){h()});modal.find("*["+d.dataclose_parameter+"='"+d.dataclose_value+"']").click(function(){h()});c("html").bind("keyup",n);var e=modal.outerHeight(),b=modal.outerWidth();overlay.css({display:"block",opacity:0});overlay.fadeTo(a.speed,a.overlay);-1===c.inArray(a.transition,["fade","slide","slideUp","slideRight"])&&(a.transition="fade");switch(a.transition){case "slide":modal.css({display:"block",position:"absolute",
opacity:1,"z-index":1E4,left:"50%","margin-left":-(b/2)+"px",top:"-"+(e+50)+"px"});modal.animate({top:a.top+"px"},a.speed);break;case "slideUp":modal_wrapper.css({"overflow-y":"hidden"});modal.css({display:"block",position:"absolute",opacity:1,"z-index":1E4,left:"50%","margin-left":-(b/2)+"px",top:"105%"});modal.animate({top:a.top+"px"},a.speed,function(){modal_wrapper.css({"overflow-y":"auto"})});break;case "slideRight":modal_wrapper.css({"overflow-y":"hidden"});modal.css({display:"block",position:"absolute",
opacity:1,"z-index":1E4,left:-b+"px","margin-left":-(b/2)+"px",top:a.top+"px"});modal.animate({left:"50%"},a.speed,function(){modal_wrapper.css({"overflow-y":"auto"})});break;case "fade":modal.css({display:"block",position:"absolute",opacity:0,"z-index":1E4,left:"50%","margin-left":-(b/2)+"px",top:a.top+"px"}),modal.fadeTo(a.speed,1)}}function h(){overlay.fadeOut(200);switch(a.transition){case "slide":modal.animate({top:"-"+(modal.outerHeight()+50)+"px"},200,k);break;case "slideUp":modal_wrapper.css({"overflow-y":"hidden"});
modal.animate({top:"105%"},200,k);break;case "slideRight":modal.animate({left:"150%"},200,k);break;case "fade":modal.fadeOut(200,k)}c("html").unbind("keyup")}function k(){overlay.remove();modal.remove();modal_wrapper.remove();g(a.afterClose)}function n(e){e=e.keyCode?e.keyCode:e.which;!0===a.closeEsc&&27==e&&h();if(!1!==a.clickEnter&&13==e){e=!1;switch(a.clickEnter){case !0:e=modal.find("button[type='submit']:last");break;case "first":e=modal.find("button:first");break;case "last":e=modal.find("button:last");
break;default:e=modal.find(a.enterButton)}e.click();a.clickEnter=null}}function l(){!0===a.closeButton&&(modal.prepend("<button type='button' class='"+d.close_button+"'>\u00d7</button>"),modal.find("."+d.close_button).unbind("click"),modal.find("."+d.close_button).bind("click",h))}function g(a){c.isFunction(a)&&a()}var d={modal_wrapper:"simp_modal_wrapper",modal_overlay:"simp_overlay",modal:"simp_modal",loading:"loading",close_button:"close_button",dataclose_parameter:"data-close",dataclose_value:"true"};
a=c.extend({top:100,overlay:0.4,extraClass:null,element:null,link:null,ajax:{},content:null,width:null,closeButton:!1,speed:200,transition:"fade",clickEnter:!1,closeEsc:!0,close:!1,beforeOpen:null,afterClose:null},a);if(!0===a.close)h();else{var f=c("<div id='"+d.modal_wrapper+"' class='"+d.modal_wrapper+"'><div id='"+d.modal_overlay+"' class='"+d.modal_overlay+"'></div><div id='"+d.modal+"' class='"+d.modal+"'></div></div>");c("body").append(f);overlay=c("#"+d.modal_overlay);modal=c("#"+d.modal);
modal_wrapper=c("#"+d.modal_wrapper);modal_wrapper.css({position:"fixed","z-index":9998,top:"0px",left:"0px",bottom:"0px",right:"0px",height:"100%",width:"100%","overflow-y":"auto","overflow-x":"hidden"});overlay.css({position:"fixed","z-index":9999,top:"0px",left:"0px",bottom:"0px",right:"0px",height:"100%",width:"100%"});null!==a.width&&modal.css("width",a.width);null!==a.content&&modal.html(a.content);if(null!==a.link){var f=a.link,p=f.attr("href");a.element=c(p);a.link=null;f.click(function(){c.simpModal(a)})}else if(null!==
a.element&&(f=a.element.html(),modal.html(f)),null!==a.extraClass&&modal.addClass(a.extraClass),c.isEmptyObject(a.ajax))l(),j();else{var b=c.extend({file:null,method:"post",params:null,loadingMessage:null,beforeLoad:null,onError:null,onSuccess:null},a.ajax),m=!0;null!==b.loadingMessage&&(loading="<div class='"+d.loading+"'>"+b.loadingMessage+"</div>",modal.html(loading),j(),m=!1);f={};null!==b.params&&(f=b.params);g(b.beforeLoad);"get"===b.method?c.get(b.file,f,function(a){modal.html(a);l();m&&j();
g(b.onSuccess)}).error(function(){g(b.onError)}):c.post(b.file,f,function(a){modal.html(a);l();m&&j();g(b.onSuccess)}).error(function(){g(b.onError)})}}}})})(jQuery);